<!DOCTYPE html>

<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>æ¨¡æ‹Ÿå®šä½ï¼Œä¿®æ”¹æ‰‹æœºå®šä½ï¼Œé’‰é’‰æ‰“å¡ï¼ˆiOSã€å®‰å“ï¼‰ [ ç¬‘èƒ–ä»”çš„åšå®¢ ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
    <script id="leancloud">
      AV.init({
          appId: "6E5zTbTljdUbVW2WkXPsXGJk-gzGzoHsz",
          appKey: "0vsyDKfNpeSECAI70J794ugv"
      });
    </script>

</head></html>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="/favicon.ico"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">é¦–é¡µ</a>
        
          
          
          
          
          
          
          <a href="/archives">å½’æ¡£</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">æ¨¡æ‹Ÿå®šä½ï¼Œä¿®æ”¹æ‰‹æœºå®šä½ï¼Œé’‰é’‰æ‰“å¡ï¼ˆiOSã€å®‰å“ï¼‰</h1>
<article class="post markdown-style">
  <p>å…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œè¿™å¥è¯ä¸€ç‚¹æ²¡é”™ï¼Œå…ˆä»æ„Ÿå…´è¶£çš„æ¥å§ã€‚</p>
<p>æ¨¡æ‹Ÿå®šä½ï¼Œå½“æ—¶å€’è…¾è¿™ä¸ªè®©æˆ‘ç¬¬ä¸€æ¬¡æ„Ÿè§‰åˆ°ç¨‹åºçŒ¿çš„éª„å‚²ä¸å¼€å¿ƒï¼Œèƒ½è®©è‡ªå·±è·åˆ©ï¼Œæ— ç–‘æ˜¯æœ€æœ‰ä»·å€¼çš„ã€‚</p>
<p>è¿™ä¸ªä¹Ÿæ˜¯å€Ÿé‰´åˆ«äººçš„ï¼Œä¸è¿‡èƒ½å¤Ÿæ‰¾åˆ°æ–¹æ³•å¹¶å­¦ä»¥è‡´ç”¨ä¹Ÿç®—æ˜¯æ”¶è·å’¯ï¼Œæœé›†æ•´ç†ï¼Œæœ¬èº«æˆ‘ç†è§£çš„å†™ç¨‹åºå°±æ˜¯copyä»£ç çš„è¿‡ç¨‹ï¼Œç»„åˆæˆä»€ä¹ˆæ ·å°±å„æ˜¾ç¥é€šäº†ã€‚</p>
<p>ç¿»äº†ç¿»è®°è¿™ä¸ªç¬”è®°çš„æ—¶é—´ï¼š2018å¹´11æœˆ23æ—¥ï¼Œå¥½ä¹…è¿œï¼Œâ€œåªè®°å½•ä¸å›é¡¾â€çš„è¯Ÿç—…å¤§æ¦‚æ˜¯ä»ä¸Šå­¦æ—¶å€™å°±å…»æˆäº†ï¼Œå¦‚åŒè€ƒè¯•æ—¶å€™è€è§‰å¾—è‡ªå·±æœ¬å­ä¸Šè®°è¿‡è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼Œä½†ä»…ä»…æ˜¯è®°å½•äº†ã€‚ã€‚ã€‚æ²¡ä»€ä¹ˆåµç”¨ã€‚ã€‚ã€‚ğŸ™ƒğŸ˜‚ğŸ¤£ã€‚ã€‚ã€‚</p>
<p>æ¸©æ•…è€ŒçŸ¥æ–°ï¼Œå—¯ï¼Œæœ‰ç‚¹é“ç†ã€‚</p>
<p>ä¸‹é¢ç½—åˆ—ä¸‹æ­¥éª¤å’¯ï¼Œå®‰åˆ©ç»™è¿‡å¥½å‡ ä¸ªå°ä¼™ä¼´ï¼Œç¬”è®°è®°äº†ä¸€å¤§å †ï¼Œå´æ²¡æƒ³è¿‡å†™åšå®¢ï¼Œå¤§å†™çš„æœã€‚</p>
<p>æ¯•ç«Ÿæˆ‘æ˜¯åšiOSå¼€å‘çš„ï¼Œé¡ºåºå˜›å°±iOSã€å®‰å“ä¸€ä¸ªä¸ªæ¥äº†ï¼ˆå½“æ—¶æƒ³è¦ä¹Ÿç»™ç”¨å®‰å“æ‰‹æœºçš„æœ‹å‹ä»¬ç¦åˆ©æ¥ç€ï¼Œäº¦ç ”ç©¶äº†ä¸€ç•ªï¼‰ã€‚</p>
<blockquote>
<p>ä¸€ã€iOSï¼ˆmacã€æ•°æ®çº¿ä¸€æ ¹ã€è‹¹æœæ‰‹æœºã€xcodeï¼‰ï¼š</p>
<blockquote>
<p>è¿æ¥çœŸæœºè¿è¡Œä»£ç ï¼Œæ­¤ä¸¾å°†ä¿®æ”¹æ‰‹æœºå®šä½ï¼Œç›´æ¥æ‹”çº¿å¯ä¿ç•™è¯¥å®šä½ï¼Œä½¿ç”¨å…¶ä»–å¸¦æœ‰åœ°å›¾å®šä½è½¯ä»¶å‡æ˜¾ç¤ºæ­¤å®šä½ï¼Œå¯é‡å¯æ‰‹æœºæ¢å¤å®šä½ï¼ˆæ­¤å®šä½ä¿ç•™æ—¶é—´ä¸å›ºå®šï¼Œä½¿ç”¨å…¶ä»–å®šä½è½¯ä»¶å¯èƒ½å¯¼è‡´æ­¤å®šä½å¤±æ•ˆï¼Œå¦‚ä¸å¸¸ç”¨å…¶å®ƒå®šä½è½¯ä»¶ï¼Œäº²æµ‹å¯ä¿ç•™ä¸€å‘¨+ï¼‰ã€‚</p>
</blockquote>
<p>äºŒã€å®‰å“ï¼ˆä»»æ„ç³»ç»Ÿç”µè„‘ä¸€å°ã€æ¨¡æ‹Ÿå™¨ï¼‰ï¼›</p>
</blockquote>
<h2 id="ä¸€ã€iOSï¼ˆmacã€æ•°æ®çº¿ä¸€æ ¹ã€iphoneã€xcodeï¼‰ï¼š"><a href="#ä¸€ã€iOSï¼ˆmacã€æ•°æ®çº¿ä¸€æ ¹ã€iphoneã€xcodeï¼‰ï¼š" class="headerlink" title="ä¸€ã€iOSï¼ˆmacã€æ•°æ®çº¿ä¸€æ ¹ã€iphoneã€xcodeï¼‰ï¼š"></a>ä¸€ã€iOSï¼ˆmacã€æ•°æ®çº¿ä¸€æ ¹ã€iphoneã€xcodeï¼‰ï¼š</h2><p>githubåœ°å€ï¼š<a href="https://github.com/xiaopangzai/SimulatorLocation" target="_blank" rel="noopener">https://github.com/xiaopangzai/SimulatorLocation</a></p>
<p><strong>1ã€æ–°å»ºä¸€é¡¹ç›®ï¼Œæ–°å»ºgpxæ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­ç»çº¬åº¦ï¼Œç»çº¬åº¦å¯ä½¿ç”¨é«˜å¾·å¼€æ”¾å¹³å°ã€ç™¾åº¦æ‹¾å–åæ ‡ï¼š</strong></p>
<p>æ‹¾å–åæ ‡ï¼ˆ<strong><em>ç»éªŒè¯ç™¾åº¦æ¯”è¾ƒç²¾å‡†ï¼Œå¯è‡ªè¡Œå¯¹æ¯”å‚è€ƒ</em></strong>ï¼‰ï¼š<br>ç™¾åº¦ï¼š<a href="http://api.map.baidu.com/lbsapi/getpoint/index.html" target="_blank" rel="noopener">http://api.map.baidu.com/lbsapi/getpoint/index.html</a><br>é«˜å¾·å¼€æ”¾å¹³å°ï¼š<a href="https://lbs.amap.com/console/show/picker" target="_blank" rel="noopener">https://lbs.amap.com/console/show/picker</a></p>
<p><img src="https://img-blog.csdnimg.cn/20190905142424493.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20190905142431881.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20190905143926372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>2ã€ViewController.må¯¼å…¥å®šä½ç›¸å…³ä»£ç ï¼Œä»¥æ‰“å°ç›¸å…³å®šä½ä¿¡æ¯ï¼ŒéªŒè¯æ˜¯å¦å‡†ç¡®ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line">#import &quot;SSYLocationChanged.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ViewController ()&lt;CLLocationManagerDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong)CLLocationManager *locationManager;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    _locationManager =[[CLLocationManager alloc]init];</span><br><span class="line">    _locationManager.delegate =self;</span><br><span class="line">    //è®¾ç½®å®šä½ç»å‡†</span><br><span class="line">    _locationManager.desiredAccuracy =kCLLocationAccuracyNearestTenMeters;</span><br><span class="line">    [_locationManager requestWhenInUseAuthorization];//å¦åˆ™ï¼Œios10ä¸å¼¹å®šä½æ¡†</span><br><span class="line">    _locationManager.distanceFilter =10.0f;</span><br><span class="line">    //å¼€å§‹å®šä½</span><br><span class="line">    [_locationManager startUpdatingLocation];</span><br><span class="line">    </span><br><span class="line">    // Do any additional setup after loading the view.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä½ä»£ç†ç»çº¬åº¦å›è°ƒ</span><br><span class="line">-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray&lt;CLLocation *&gt; *)locations&#123;</span><br><span class="line">    CLLocation *newLocation =locations[0];</span><br><span class="line">    CLLocationCoordinate2D oCoordinate =newLocation.coordinate;</span><br><span class="line">    [_locationManager stopUpdatingLocation];</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;ç»åº¦------%f\n------çº¬åº¦%f&quot;,oCoordinate.longitude,oCoordinate.latitude);</span><br><span class="line">    //åˆ›å»ºåœ°ç†ä½ç½®è§£ç ç¼–ç å™¨å¯¹è±¡</span><br><span class="line">    CLGeocoder *geoCoder =[[CLGeocoder alloc]init];</span><br><span class="line">    [geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray&lt;CLPlacemark *&gt; * _Nullable placemarks, NSError * _Nullable error) &#123;</span><br><span class="line">        for (CLPlacemark *place in placemarks) &#123;</span><br><span class="line">            NSLog(@&quot;åŸå¸‚-----%@&quot;,place.locality);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error&#123;</span><br><span class="line">    if ([error code] == kCLErrorDenied)&#123;</span><br><span class="line">        //è®¿é—®è¢«æ‹’ç»</span><br><span class="line">        NSLog(@&quot;è®¿é—®è¢«æ‹’ç»&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    if ([error code] == kCLErrorLocationUnknown) &#123;</span><br><span class="line">        //æ— æ³•è·å–ä½ç½®ä¿¡æ¯</span><br><span class="line">        NSLog(@&quot;æ— æ³•è·å–ä½ç½®ä¿¡æ¯&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<p><strong>3ã€å› ä¸Šä¸€æ­¥éª¤æ¶‰åŠå®šä½ï¼Œé‚éœ€è®¾ç½®info.plistç›¸å…³æƒé™ï¼š</strong><br><img src="https://img-blog.csdnimg.cn/20190905145436368.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>4ã€æ¨¡æ‹Ÿå™¨å®šä½é€‰æ‹©æ‰€åˆ›å»ºçš„Locationæ–‡ä»¶ï¼š</strong><br><img src="https://img-blog.csdnimg.cn/20190905150451384.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20190905150517978.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>5ã€è¿æ¥çœŸæœºè¿è¡Œå³å¯ï¼Œæ­¤ä¸¾å°†ä¿®æ”¹æ‰‹æœºå®šä½ï¼Œç›´æ¥æ‹”çº¿å¯ä¿ç•™è¯¥å®šä½ï¼Œä½¿ç”¨å…¶ä»–å¸¦æœ‰åœ°å›¾å®šä½è½¯ä»¶å‡æ˜¾ç¤ºæ­¤å®šä½ï¼Œå¯é‡å¯æ‰‹æœºæ¢å¤å®šä½ï¼ˆæ­¤å®šä½ä¿ç•™æ—¶é—´ä¸å›ºå®šï¼Œä½¿ç”¨å…¶ä»–å®šä½è½¯ä»¶å¯èƒ½å¯¼è‡´æ­¤å®šä½å¤±æ•ˆï¼Œå¦‚ä¸å¸¸ç”¨å…¶å®ƒå®šä½è½¯ä»¶ï¼Œäº²æµ‹å¯ä¿ç•™ä¸€å‘¨+ï¼‰ï¼›</strong></p>
<h2 id="äºŒã€å®‰å“ï¼ˆä»»æ„ç³»ç»Ÿç”µè„‘ä¸€å°ã€æ¨¡æ‹Ÿå™¨ï¼‰ï¼š"><a href="#äºŒã€å®‰å“ï¼ˆä»»æ„ç³»ç»Ÿç”µè„‘ä¸€å°ã€æ¨¡æ‹Ÿå™¨ï¼‰ï¼š" class="headerlink" title="äºŒã€å®‰å“ï¼ˆä»»æ„ç³»ç»Ÿç”µè„‘ä¸€å°ã€æ¨¡æ‹Ÿå™¨ï¼‰ï¼š"></a>äºŒã€å®‰å“ï¼ˆä»»æ„ç³»ç»Ÿç”µè„‘ä¸€å°ã€æ¨¡æ‹Ÿå™¨ï¼‰ï¼š</h2><p>1ã€ä¸‹è½½ç›¸åº”ç³»ç»Ÿç‰ˆæœ¬çš„å¤œç¥æ¨¡æ‹Ÿå™¨ï¼ˆä»¥macç³»ç»Ÿä¸ºä¾‹ï¼‰ï¼š<a href="http://www.itmop.com/downinfo/259093.html" target="_blank" rel="noopener">http://www.itmop.com/downinfo/259093.html</a></p>
<p><img src="https://img-blog.csdnimg.cn/20190905162221907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>2ã€æ‰“å¼€æ¨¡æ‹Ÿå™¨ï¼Œæ‰¾åˆ°å·¦ä¸Šè§’è™šæ‹Ÿå®šä½å›¾æ ‡ï¼Œé€‰æ‹©æ¨¡æ‹Ÿä½ç½®æ‰€ä½¿ç”¨çš„åœ°å›¾ï¼Œè¾“å…¥æ¨¡æ‹Ÿä½ç½®çš„ç»çº¬åº¦ï¼Œç‚¹å‡»â€œgoâ€ï¼Œåœ°å›¾å³å¯æ˜¾ç¤ºè¯¥ä½ç½®ï¼Œç‚¹å‡»å³ä¸‹è§’çš„â€œå®šä½åˆ°è¿™é‡Œâ€ï¼Œå®šä½å·¥å…·ä¸‹æ–¹æ˜¾ç¤ºâ€œå·²å®šä½â€ï¼Œå³è¡¨ç¤ºæ¨¡æ‹Ÿå™¨æˆåŠŸæ¨¡æ‹Ÿåœ°ç‚¹ï¼Œè¿™æ—¶å¯ä»¥ç‚¹å‡»å³ä¸Šè§’â€œå…³é—­â€æŒ‰é’®ã€‚</p>
<p>ä¸‹è½½é’‰é’‰ï¼Œç™»å½•ï¼Œæ‰“å¡ç•Œé¢å³å±•ç¤ºè¯¥å®šä½ã€‚</p>
<p>ï¼ˆå› æ¨¡æ‹Ÿå™¨æ‰“å¼€å¤±è´¥ï¼Œæš‚æ— æˆªå›¾ï¼Œå¯æŒ‰æ­¥éª¤è‡ªè¡Œå°è¯•ï¼‰<br><img src="https://img-blog.csdnimg.cn/20190905162234147.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbmc3ODc1NTk2MTM=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>

</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/2019/10/12/ã€æ‰¿ä¸Šç¯‡ã€‘Charlesï¼ˆç¿»åˆ°äº†è‡ªå·±æ€»ç»“çš„ç¬”è®°ï¼Œç®—æ˜¯ä¸Šä¸ªçš„å»¶å±•ç‰ˆå§ï¼‰/">ä¸Šä¸€ç¯‡</a>
    

    
    <p>ä¸Šæ¬¡æ›´æ–° 2019-10-12</p>
    
    
        <a class="extend next post-next" href="/2019/10/12/å·¥ä½œå¤šå¹´çš„....../">ä¸‹ä¸€ç¯‡</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://blog.csdn.net/pang787559613" title="csdn" target="_self">
					<i class="fa fa-csdn"></i>
					</a>
				</li>
			
		
			
				
				<li>
					<a href="https://www.jianshu.com/u/1eb3400994f7" title="jianshu" target="_self">
					<i class="fa fa-jianshu"></i>
					</a>
				</li>
			
		
			
				
				<li>
					<a href="https://www.zhihu.com/people/xiao-pang-zi-14-4/posts" title="zhihu" target="_self">
					<i class="fa fa-zhihu"></i>
					</a>
				</li>
			
		
			
				
				<li>
					<a href="https://github.com/xiaopangzai" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                Â© ç¬‘èƒ–ä»” 2019
            
        </span>
    </div>
    <div class="power">
        <span>
            <!--Powered by <a href="https://hexo.io">Hexo</a> & <a href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>-->
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
